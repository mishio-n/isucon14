### JSONレスポンス
- クライアントはポーリングによってライドの状態の変化を取得します。
- `retry_after_ms` で指定された時間(ms)が経過した後に再度リクエストを送信します。
  - リファレンス実装では30ms後に再度リクエストを送信するようになっています。

### SSE(Server-Sent Events)
- クライアントはSSEのコネクションからライドの状態の変化を取得します。
- 通知メッセージは `data: ` に続けてJSON文字列を返します。
- クライアントとの間にSSEのコネクションを確立した後、即座に最新のライドの状態を送信し、その後は随時最新のライドの状態を送信します。

### 性能改善のポイント
1. **ポーリングの頻度**:
   - 現在のポーリング間隔は30msと非常に短いため、サーバーへの負荷が高くなります。ポーリング間隔を長くするか、ポーリング自体を減らす方法を検討します。

2. **SSEの利用**:
   - SSEを利用することで、ポーリングを廃止し、サーバーからのプッシュ通知に切り替えることができます。これにより、サーバーへのリクエスト数を大幅に減らし、性能を改善できます。

### 手を付けるべき部分
1. **ポーリング間隔の調整**:
   - まずはポーリング間隔を調整し、サーバーへのリクエスト頻度を減らします。これにより、即座にサーバー負荷を軽減できます。

2. **SSEの導入**:
   - 次に、SSEを導入し、ポーリングを廃止します。これにより、クライアントとサーバー間の通信効率が向上し、性能が大幅に改善されます。

これらの改善を行うことで、アプリケーションの性能を向上させることが期待できます。